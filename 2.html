<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تسجيل الطالب</title>
  <link href="package/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style2.css">
  <link rel="stylesheet" href="font.css">
</head>

<body class="bg-gray-100 font-sans">

<main>
  <!-- Main Wrapper -->
  <div class="w-full max-w-4xl px-4 md:px-8 py-6 mx-auto">
    <h1 class="text-3xl font-bold text-gray-700 mb-6">اضافة طالب جديد</h1>

    <form method="POST" enctype="multipart/form-data" class="space-y-6">

      <!-- Student Information Section -->
      <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
        <h2 class="text-2xl font-semibold text-gray-700 mb-4">معلومات الطالب</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

          <div class="flex flex-col">
            <label for="student_name" class="text-sm font-medium text-gray-700">اسم الرباعي لطالب</label>
            <input type="text" id="student_name" name="student_name" class="mt-1 p-2 border border-gray-300 rounded-md" required>
          </div>

          <div class="flex flex-col">
            <label for="dob" class="text-sm font-medium text-gray-700">تاريخ الميلاد</label>
            <input type="date" id="dob" name="dob" class="mt-1 p-2 border border-gray-300 rounded-md" required>
          </div>

          <div class="flex flex-col col-span-2">
            <label for="address" class="text-sm font-medium text-gray-700">عنوان السكن</label>
            <input type="text" id="address" name="address" class="mt-1 p-2 border border-gray-300 rounded-md" required>
          </div>

          <div class="flex flex-col">
            <label for="guardian_phone" class="text-sm font-medium text-gray-700">رقم هاتف ولي الامر</label>
            <input type="tel" id="guardian_phone" name="guardian_phone" class="mt-1 p-2 border border-gray-300 rounded-md" required>
          </div>

          <div class="flex flex-col col-span-2">
            <label for="student_photo" class="text-sm font-medium text-gray-700">صورة الطالب الشخصية</label>
            <div class="file-input-wrapper">
              <label for="student_photo" class="text-sm font-medium text-gray-700 cursor-pointer">
                <i class="fas fa-camera-retro mr-2"></i> رفع الصورة
              </label>
              <input type="file" id="student_photo" name="student_photo" accept="image/jpeg, image/png" onchange="previewImage(event)">
            </div>
            <div id="image-preview" class="file-input-preview mt-4"></div>
          </div>

        </div>
      </div>

      <!-- School Information Section -->
      <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
        <h2 class="text-2xl font-semibold text-gray-700 mb-4">معلومات المدرسة السابقة</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

          <div class="flex flex-col">
            <label for="last_school" class="text-sm font-medium text-gray-700">اخر مدرسة كان فيها</label>
            <input type="text" id="last_school" name="last_school" class="mt-1 p-2 border border-gray-300 rounded-md" required>
          </div>

          <div class="flex flex-col">
            <label for="registration_reason" class="text-sm font-medium text-gray-700">سبب التسجيل</label>
            <select id="registration_reason" name="registration_reason" class="mt-1 p-2 border border-gray-300 rounded-md" required>
              <option value="مرحلة جديدة">مرحلة جديدة</option>
              <option value="نقل">نقل</option>
              <option value="تغيير الإقامة">تغيير الإقامة</option>
              <option value="اخرى">أخرى</option>
            </select>
          </div>

          <div class="flex flex-col">
            <label for="stage" class="text-sm font-medium text-gray-700">المرحلة السابقة</label>
            <select id="stage" name="stage" class="mt-1 p-2 border border-gray-300 rounded-md" required>
              <option value="لاشي">لا شيء</option>
              <option value="ابتدائية">ابتدائية</option>
              <option value="متوسطة">متوسطة</option>
              <option value="اعدادية">اعدادية</option>
            </select>
          </div>

          <div class="flex flex-col">
            <label for="grade" class="text-sm font-medium text-gray-700">درجة المعدل</label>
            <input type="number" id="grade" name="grade" class="mt-1 p-2 border border-gray-300 rounded-md" required>
          </div>

          <div class="flex flex-col">
            <label for="failure_years" class="text-sm font-medium text-gray-700">سنوات الرسوب</label>
            <input type="number" id="failure_years" name="failure_years" class="mt-1 p-2 border border-gray-300 rounded-md" required>
          </div>

          <div class="flex flex-col">
            <label for="leave_years" class="text-sm font-medium text-gray-700">سنوات ترك المدرسة</label>
            <input type="number" id="leave_years" name="leave_years" class="mt-1 p-2 border border-gray-300 rounded-md" required>
          </div>

          <div class="flex flex-col col-span-2">
            <label for="start_date" class="text-sm font-medium text-gray-700">تاريخ المباشرة</label>
            <input type="date" id="start_date" name="start_date" class="mt-1 p-2 border border-gray-300 rounded-md" required>
          </div>

        </div>
      </div>

      <!-- Medical Report Section -->
      <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
        <h2 class="text-2xl font-semibold text-gray-700 mb-4">التقرير الطبي</h2>
        <textarea id="medical_report" name="medical_report" rows="10" class="w-full p-4 border border-gray-300 rounded-md" placeholder="ادخل بيانات التقرير الطبي هنا ..."></textarea>
      </div>

      <!-- Notes Section -->
      <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
        <h2 class="text-2xl font-semibold text-gray-700 mb-4">ملاحظات</h2>
        <textarea id="notes" name="notes" rows="4" class="mt-1 p-2 border border-gray-300 rounded-md"></textarea>
      </div>

      <!-- Submit Button -->
      <div class="flex justify-center mt-8">
        <button class="bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition duration-300">
          تسجيل
        </button>
      </div>

    </form>
  </div>

</main>

<script src="script.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const SCRIPT_URL =
    "https://script.google.com/macros/s/AKfycbwOdFiGnsEhg--Wz8CziDLe-YNh18Hm-j9j8PnfGCrnCwxipx2L5oY715OyAYm_P9JHVw/exec"; // ← ضع رابط Web App بعد النشر

  const form = document.querySelector("form");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const data = {
      student_name: document.getElementById("student_name").value,
      dob: document.getElementById("dob").value,
      address: document.getElementById("address").value,
      guardian_phone: document.getElementById("guardian_phone").value,
      last_school: document.getElementById("last_school").value,
      registration_reason: document.getElementById("registration_reason").value,
      stage: document.getElementById("stage").value,
      grade: document.getElementById("grade").value,
      failure_years: document.getElementById("failure_years").value,
      leave_years: document.getElementById("leave_years").value,
      start_date: document.getElementById("start_date").value,
      disease_name: document.getElementById("medical_report").value,
      notes: document.getElementById("notes").value
    };

    try {
      const response = await fetch(SCRIPT_URL, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data),
      });

      alert("✅ تم تسجيل الطالب بنجاح!");
      form.reset();
    } catch (error) {
      alert("❌ خطأ أثناء إرسال البيانات!");
      console.error(error);
    }
  });
});



</script>
</body>

</html>
